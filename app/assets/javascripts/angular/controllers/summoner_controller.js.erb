app.controller('SummonerCtrl', ['$scope', '$routeParams', '$http',function($scope, $routeParams, $http){
  console.log($scope);

  // Summoner Information
  // Set Initial Information
  $scope.summonerInfo = {};
  $scope.summonerInfo.searchData = {
    'id': $routeParams.summonerId,
    'region': $scope.$parent.selectedRegion.code
  };
  $scope.searchSummonerById = function () {
    $http.post('/summoner/id', $scope.summonerInfo.searchData).success(function(response){
      console.log(response);
      $scope.summonerInfo.profileIcon = response.summoner.icon;
      $scope.summonerInfo.name = response.summoner.name;
      $scope.summonerInfo.level = response.summoner.summonerLevel;
      $scope.summonerInfo.id = response.summoner.id;
    }).error(function(response){
      // noty error messages
    })
  };
  $scope.summonerInfo.league = {};
  $scope.searchLeagueEntry = function (){
    $http.post('/summoner/league_entry', $scope.summonerInfo.searchData).success(function(response){
      console.log(response);
      $scope.summonerInfo.league.team5 = response.league_entry.team5;
      $scope.summonerInfo.league.team3 = response.league_entry.team3;
      $scope.summonerInfo.league.solo5 = response.league_entry.solo5;
      $scope.summonerInfo.borderIcon = response.border_icon;
    }).error(function(response){
      // noty error messages
    })
  };
  $scope.queType = ["Solo 5x5", "Team 3x3", "Team 5x5"];
  $scope.badgeDefault = "<%= asset_path('badgeDefault.png') %>";
  $scope.summonerInfo.stats = {}
  $scope.searchStatsSummary = function (){
    $http.post('/summoner/stats_summary', $scope.summonerInfo.searchData).success(function(response){
      console.log(response);
    }).error(function(response){
      // noty error messages
    })
  };

  //get informations
  $scope.searchSummonerById();
  $scope.searchLeagueEntry();
  $scope.searchStatsSummary();

  // Tabs stuff
  $scope.tabs = {};
  $scope.tabs.changed = function(tabHeading){
    $scope.tabs.status[tabHeading] = true;
    $scope.tabs.updateInfo[tabHeading]();
  };
  $scope.tabs.deselected = function(tabHeading){
    $scope.tabs.status[tabHeading] = false;
  };
  $scope.tabs.status = {};
  $scope.tabs.status.profile = false;
  $scope.tabs.status.runes = false;
  $scope.tabs.status.masteries = false;
  $scope.tabs.status.matches = false;
  $scope.tabs.status.champions = false;
  $scope.tabs.status.league = false;  
  $scope.tabs.updateInfo = {};
  $scope.tabs.updateInfo.profile = function (){
    console.log("updating profile");
  };
  $scope.tabs.updateInfo.runes = function (){
    console.log("updating runes");
  };
  $scope.tabs.updateInfo.masteries = function (){
    console.log("updating masteries");
  };
  $scope.tabs.updateInfo.matches = function (){
    console.log("updating matches");
  };
  $scope.tabs.updateInfo.champions = function (){
    console.log("updating champions");
  };
  $scope.tabs.updateInfo.league = function (){
    console.log("updating league");
  };
}])
